<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SoftwareLabs Secure Service Portal</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      background: #000;
      color: #0f0;
      font-family: 'Courier New', monospace;
      line-height: 1.4;
      padding: 20px;
    }
    .container { max-width: 900px; margin: 0 auto; }
    h1 { text-align: center; margin: 20px 0; color: #0f8; }
    .terminal {
      background: #010;
      border: 1px solid #0a0;
      border-radius: 8px;
      padding: 15px;
      height: 300px;
      overflow-y: auto;
      margin: 20px 0;
      font-size: 14px;
    }
    .input-area {
      display: flex;
      gap: 10px;
      margin: 10px 0;
    }
    input {
      background: #001100;
      color: #0f0;
      border: 1px solid #0a0;
      padding: 10px;
      flex: 1;
      border-radius: 4px;
    }
    button {
      background: #030;
      color: #0f0;
      border: 1px solid #0a0;
      padding: 10px 16px;
      cursor: pointer;
      border-radius: 4px;
      white-space: nowrap;
    }
    button:hover { background: #050; }
    .panel { margin: 20px 0; padding: 15px; border: 1px dashed #050; }
    .hidden { display: none; }
    .log { margin: 4px 0; }
    .admin-panel { background: #001500; padding: 15px; border-left: 3px solid #0f0; }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ” SoftwareLabs Secure Service Portal</h1>

    <div class="terminal" id="terminal"></div>

    <!-- User Actions -->
    <div class="input-area">
      <button onclick="registerUser()">ğŸ” Register for API Key</button>
      <input type="text" id="authInput" placeholder="Enter admin key" />
      <button onclick="attemptAdminAuth()">ğŸ”‘ Admin Login</button>
    </div>

    <!-- Admin Dashboard (Hidden by default) -->
    <div id="adminPanel" class="panel hidden">
      <h3>ğŸ‘‘ ADMIN DASHBOARD</h3>
      <div class="admin-panel">
        <p><strong>Issued API Keys:</strong> <span id="keyCount">0</span></p>
        <p><strong>Last Request:</strong> <span id="lastRequest">Never</span></p>
        <button onclick="resetAllKeys()">ğŸ—‘ï¸ Reset All Keys</button>
      </div>
    </div>
  </div>

  <script>
   
    const _k = [100, 935, '.', 28].join(''); 
    const _s = String.fromCharCode(88, 113, 50, 33);
    const _saltedKey = _k + _s; 

    // Compute SHA-256 hash of the real admin key + salt
    async function hashAdminKey() {
      const enc = new TextEncoder();
      const data = enc.encode(_saltedKey);
      const hashBuf = await crypto.subtle.digest('SHA-256', data);
      return Array.from(new Uint8Array(hashBuf)).map(b => b.toString(16).padStart(2, '0')).join('');
    }

   
    let ADMIN_HASH = '';
    hashAdminKey().then(h => ADMIN_HASH = h);

    const VAULT_KEY = "sl_vault_key_2026";

    function encryptVault(data) {
      // Simple XOR-based obfuscation (not real crypto, but hides from view)
      let result = '';
      for (let i = 0; i < data.length; i++) {
        result += String.fromCharCode(data.charCodeAt(i) ^ VAULT_KEY.charCodeAt(i % VAULT_KEY.length));
      }
      return btoa(result);
    }

    function decryptVault(encrypted) {
      try {
        const decoded = atob(encrypted);
        let result = '';
        for (let i = 0; i < decoded.length; i++) {
          result += String.fromCharCode(decoded.charCodeAt(i) ^ VAULT_KEY.charCodeAt(i % VAULT_KEY.length));
        }
        return result;
      } catch (e) {
        return '{}';
      }
    }

    
    function loadVault() {
      const raw = localStorage.getItem('sl_vault');
      if (!raw) return { keys: [], lastUsed: null };
      try {
        return JSON.parse(decryptVault(raw));
      } catch (e) {
        return { keys: [], lastUsed: null };
      }
    }

    function saveVault(vault) {
      localStorage.setItem('sl_vault', encryptVault(JSON.stringify(vault)));
    }

    function generateAPIKey() {
      const array = new Uint8Array(16);
      crypto.getRandomValues(array);
      return 'sl_user_' + Array.from(array, b => b.toString(16).padStart(2, '0')).join('');
    }

    // ==============================
    // ğŸ–¥ï¸ TERMINAL LOGGING
    // ==============================
    function log(msg, cls = '') {
      const term = document.getElementById('terminal');
      const div = document.createElement('div');
      div.className = 'log ' + cls;
      div.innerHTML = '&gt; ' + msg;
      term.appendChild(div);
      term.scrollTop = term.scrollHeight;
    }

    // ==============================
    // ğŸ‘¤ USER REGISTRATION
    // ==============================
    function registerUser() {
      const vault = loadVault();
      const newKey = generateAPIKey();
      const now = new Date().toISOString();

      vault.keys.push({ key: newKey, issuedAt: now });
      vault.lastUsed = now;
      saveVault(vault);

      log(`âœ… API Key issued: <span style="color:#ff0">${newKey}</span>`);
      log(`â„¹ï¸ Store this securely. It won't be shown again.`);
      updateAdminStats();
    }

    // ==============================
    // ğŸ‘‘ ADMIN AUTH & PANEL
    // ==============================
    async function attemptAdminAuth() {
      const input = document.getElementById('authInput').value.trim();
      if (!input) return log("âš ï¸ Enter admin key.");

      // Recreate the same salted string
      const testSalted = input + _s; 
      const enc = new TextEncoder();
      const data = enc.encode(testSalted);
      const hashBuf = await crypto.subtle.digest('SHA-256', data);
      const testHash = Array.from(new Uint8Array(hashBuf)).map(b => b.toString(16).padStart(2, '0')).join('');

      if (testHash === ADMIN_HASH) {
        log("ğŸ‘‘ Admin access granted!");
        document.getElementById('adminPanel').classList.remove('hidden');
        updateAdminStats();
        document.getElementById('authInput').value = '';
      } else {
        log("âŒ Invalid admin key.");
      }
    }

    function updateAdminStats() {
      const vault = loadVault();
      document.getElementById('keyCount').textContent = vault.keys.length;
      document.getElementById('lastRequest').textContent = vault.lastUsed ? new Date(vault.lastUsed).toLocaleString() : 'Never';
    }

    function resetAllKeys() {
      if (confirm("Reset all API keys? This cannot be undone.")) {
        localStorage.removeItem('sl_vault');
        log("ğŸ—‘ï¸ All keys reset by admin.");
        updateAdminStats();
      }
    }

    // ==============================
    // INIT
    // ==============================
    log("ğŸš€ SoftwareLabs Secure Service Portal initialized.");
    log("ğŸ” Click 'Register' to get your personal API key.");
    log("ğŸ‘‘ Admins: enter your secret key to unlock dashboard.");
  </script>
</body>
</html>
